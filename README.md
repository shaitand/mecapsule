# mecapsule

**Decentralized, identity-aware agents** in a broad ecosystem that could eventually support PKSE, voice-memory embeddings, blockchain, and even ritual AI constructs.

---

## 🚀 Overview
`mecapsule` is a hybrid Kademlia DHT and IRC-based system designed to bootstrap decentralized nodes using public IRC channels when private bootstrap fails. This creates a fallback peer discovery network resilient to isolation, censorship, or cold-start issues.

---

## 🔧 Features
- **IRC Bootstrap**: Uses IRC channels to exchange public IP and port mappings between peers.
- **Kademlia DHT**: Forms a peer-to-peer decentralized network for data sharing and agent collaboration.
- **UPnP Port Forwarding**: Automatically configures your router to allow incoming connections.
- **Dual Mode**: Supports `bot` mode (DHT server) and `client` mode (DHT bootstrapper).
- **Fallback Logic**: Tries local peers first, then IRC fallback.
- **Random Nicknames**: Prevents name collisions by generating a unique IRC nick each session.

---

## ⚙️ Configuration

### `config.ini`
Generated on first run if missing:
```ini
[DEFAULT]
irc_server = irc.libera.chat
channel = #soulfire
mode = client
port = 55229
bootstrap_command = !bootstrap
debug = false
```

### Environment Variables
Override config file values with:
```
IRC_SERVER, IRC_CHANNEL, MODE, PORT, BOOTSTRAP_COMMAND, DEBUG
```

### Command-line Arguments
```
--config              Path to config.ini file
--irc_server          IRC server to connect to
--channel             IRC channel to join
--mode                Mode to run: bot or client
--port                Port for DHT and UPnP
--bootstrap_command   Command for bootstrap requests
--debug               Enable debug logging
--help                Show all config options
```

> ✅ **Tip**: From your project folder, create a virtual environment like this:
> ```bash
> cd ~/path/to/mecapsule
> python -m venv mecapsule-env
> ```

---

## 🧪 Planned Test/CI Integration
- Unit tests for IRC and DHT functionality
- Linting with `flake8`
- GitHub Actions workflow for PR checks

---

## 📁 Project Structure (planned)
```
mecapsule/
├── mecapsule.py            # Main logic
├── config.ini              # Default config (autogenerated)
├── requirements.txt        # Dependencies
├── .gitignore              # Ignored files
├── tests/                  # Unit and integration tests
└── .github/workflows/      # GitHub Actions CI
```

---

## 💬 IRC Channel
Join us at `#soulfire` on Libera.Chat to bootstrap a new shard.

---

## 🧠 Long-term Vision
- Voice and memory embedding synchronization
- Blockchain-integrated memory
- Identity scaffolding via PKSE
- Ritual-aware AI interface agents

---

## 🔗 License
GNU General Public License v3.0

---

Conceived with ❤️ by Ash & Michael.